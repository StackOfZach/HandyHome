<ion-content
  class="bg-gradient-to-br from-handy-yellow-50 via-white to-handy-blue-50 min-h-screen"
>
  <div
    class="flex items-center justify-center min-h-screen p-4 relative overflow-hidden"
  >
    <!-- Background Decorative Elements -->
    <div
      class="absolute top-16 left-8 w-16 h-16 bg-handy-blue-200 rounded-full opacity-20 animate-bounce-slow"
    ></div>
    <div
      class="absolute top-32 right-12 w-20 h-20 bg-handy-yellow-200 rounded-full opacity-25 animate-float"
    ></div>
    <div
      class="absolute bottom-40 left-16 w-14 h-14 bg-handy-blue-300 rounded-full opacity-30 animate-pulse-slow"
    ></div>
    <div
      class="absolute bottom-16 right-20 w-18 h-18 bg-handy-yellow-300 rounded-full opacity-20 animate-float"
    ></div>

    <div class="w-full max-w-lg relative z-10">
      <!-- Logo/Header Section -->
      <div class="text-center mb-6 animate-slide-up">
        <!-- HandyHome Logo -->
        <div class="mx-auto mb-4 relative">
          <img
            src="assets/HandyHome.png"
            alt="HandyHome Logo"
            class="w-24 h-25 mx-auto transform hover:scale-105 transition-transform duration-300 drop-shadow-2xl"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'"
          />
          <!-- Fallback icon if logo not found -->
          <div
            class="w-20 h-20 bg-gradient-to-br from-handy-yellow-400 to-handy-yellow-500 rounded-3xl hidden items-center justify-center shadow-2xl transform -rotate-3 hover:rotate-0 transition-transform duration-300"
          >
            <ion-icon name="people" class="text-2xl text-white"></ion-icon>
          </div>
        </div>

        <h1
          class="text-4xl font-bold bg-gradient-to-r from-handy-blue-600 to-handy-navy-800 bg-clip-text text-transparent mb-2 font-poppins"
        >
          Join HandyHome
        </h1>
        <p
          class="text-handy-navy-600 text-base font-medium flex items-center justify-center"
        >
          <ion-icon
            name="sparkles-outline"
            class="mr-2 text-handy-yellow-500"
          ></ion-icon>
          Create your account
        </p>
        <p class="text-handy-navy-500 text-sm">
          Start your home service journey
        </p>
      </div>

      <!-- Signup Form Card -->
      <div
        class="bg-white/80 backdrop-blur-md rounded-3xl shadow-2xl p-6 border border-white/20 animate-fade-scale"
      >
        <form [formGroup]="signupForm" (ngSubmit)="onSignup()">
          <!-- Full Name Input -->
          <div class="mb-4">
            <label
              for="fullName"
              class="block text-sm font-semibold text-handy-navy-700 mb-2 flex items-center"
            >
              <ion-icon
                name="person-outline"
                class="mr-2 text-handy-blue-500"
              ></ion-icon>
              Full Name
            </label>
            <div class="relative">
              <input
                id="fullName"
                type="text"
                formControlName="fullName"
                placeholder="Enter your full name"
                class="p-3 border-2 border-gray-200 rounded-xl w-full shadow-sm focus:ring-3 focus:ring-handy-blue-200 focus:border-handy-blue-500 transition-all duration-300 text-handy-navy-700 placeholder-gray-400 bg-white/70"
                [class.border-red-400]="signupForm.get('fullName')?.invalid && signupForm.get('fullName')?.touched"
              />
              <div
                *ngIf="signupForm.get('fullName')?.valid && signupForm.get('fullName')?.touched"
                class="absolute right-3 top-1/2 transform -translate-y-1/2"
              >
                <ion-icon
                  name="checkmark-circle"
                  class="text-green-500 text-lg"
                ></ion-icon>
              </div>
            </div>
            <div
              *ngIf="signupForm.get('fullName')?.invalid && signupForm.get('fullName')?.touched"
              class="text-red-500 text-xs mt-1 flex items-center"
            >
              <ion-icon name="warning-outline" class="mr-1"></ion-icon>
              <span *ngIf="signupForm.get('fullName')?.errors?.['required']"
                >Full name is required</span
              >
              <span *ngIf="signupForm.get('fullName')?.errors?.['minlength']"
                >Name must be at least 2 characters</span
              >
            </div>
          </div>

          <!-- Email Input -->
          <div class="mb-4">
            <label
              for="email"
              class="block text-sm font-semibold text-handy-navy-700 mb-2 flex items-center"
            >
              <ion-icon
                name="mail-outline"
                class="mr-2 text-handy-blue-500"
              ></ion-icon>
              Email Address
            </label>
            <div class="relative">
              <input
                id="email"
                type="email"
                formControlName="email"
                placeholder="Enter your email address"
                class="p-3 border-2 border-gray-200 rounded-xl w-full shadow-sm focus:ring-3 focus:ring-handy-blue-200 focus:border-handy-blue-500 transition-all duration-300 text-handy-navy-700 placeholder-gray-400 bg-white/70"
                [class.border-red-400]="signupForm.get('email')?.invalid && signupForm.get('email')?.touched"
              />
              <div
                *ngIf="signupForm.get('email')?.valid && signupForm.get('email')?.touched"
                class="absolute right-3 top-1/2 transform -translate-y-1/2"
              >
                <ion-icon
                  name="checkmark-circle"
                  class="text-green-500 text-lg"
                ></ion-icon>
              </div>
            </div>
            <div
              *ngIf="signupForm.get('email')?.invalid && signupForm.get('email')?.touched"
              class="text-red-500 text-xs mt-1 flex items-center"
            >
              <ion-icon name="warning-outline" class="mr-1"></ion-icon>
              <span *ngIf="signupForm.get('email')?.errors?.['required']"
                >Email is required</span
              >
              <span *ngIf="signupForm.get('email')?.errors?.['email']"
                >Please enter a valid email</span
              >
            </div>
          </div>

          <!-- Phone Input -->
          <div class="mb-4">
            <label
              for="phone"
              class="block text-sm font-semibold text-handy-navy-700 mb-2 flex items-center"
            >
              <ion-icon
                name="call-outline"
                class="mr-2 text-handy-blue-500"
              ></ion-icon>
              Phone Number
            </label>
            <div class="relative">
              <input
                id="phone"
                type="tel"
                formControlName="phone"
                placeholder="Enter your 11-digit phone number"
                maxlength="11"
                pattern="[0-9]*"
                inputmode="numeric"
                class="p-3 border-2 border-gray-200 rounded-xl w-full shadow-sm focus:ring-3 focus:ring-handy-blue-200 focus:border-handy-blue-500 transition-all duration-300 text-handy-navy-700 placeholder-gray-400 bg-white/70"
                [class.border-red-400]="signupForm.get('phone')?.invalid && signupForm.get('phone')?.touched"
              />
              <div
                *ngIf="signupForm.get('phone')?.valid && signupForm.get('phone')?.touched"
                class="absolute right-3 top-1/2 transform -translate-y-1/2"
              >
                <ion-icon
                  name="checkmark-circle"
                  class="text-green-500 text-lg"
                ></ion-icon>
              </div>
            </div>
            <div
              *ngIf="signupForm.get('phone')?.invalid && signupForm.get('phone')?.touched"
              class="text-red-500 text-xs mt-1 flex items-center"
            >
              <ion-icon name="warning-outline" class="mr-1"></ion-icon>
              <span *ngIf="signupForm.get('phone')?.errors?.['required']"
                >Phone number is required</span
              >
              <span *ngIf="signupForm.get('phone')?.errors?.['pattern']"
                >Please enter a valid phone number</span
              >
            </div>
          </div>

          <!-- Role Selection -->
          <div class="mb-4">
            <label
              for="role"
              class="block text-sm font-semibold text-handy-navy-700 mb-2 flex items-center"
            >
              <ion-icon
                name="business-outline"
                class="mr-2 text-handy-blue-500"
              ></ion-icon>
              Account Type
            </label>
            <div class="relative">
              <select
                id="role"
                formControlName="role"
                class="p-3 border-2 border-gray-200 rounded-xl w-full shadow-sm focus:ring-3 focus:ring-handy-blue-200 focus:border-handy-blue-500 transition-all duration-300 text-handy-navy-700 bg-white/70 appearance-none cursor-pointer"
              >
                <option value="client">Client - I need services</option>
                <option value="worker">Worker - I provide services</option>
              </select>
              <ion-icon
                name="chevron-down"
                class="absolute right-3 top-1/2 transform -translate-y-1/2 text-handy-navy-400 pointer-events-none"
              ></ion-icon>
            </div>
          </div>

          <!-- Password Input -->
          <div class="mb-4">
            <label
              for="password"
              class="block text-sm font-semibold text-handy-navy-700 mb-2 flex items-center"
            >
              <ion-icon
                name="lock-closed-outline"
                class="mr-2 text-handy-blue-500"
              ></ion-icon>
              Password
            </label>
            <div class="relative">
              <input
                id="password"
                [type]="showPassword ? 'text' : 'password'"
                formControlName="password"
                placeholder="Create a secure password"
                class="p-3 border-2 border-gray-200 rounded-xl w-full shadow-sm focus:ring-3 focus:ring-handy-blue-200 focus:border-handy-blue-500 transition-all duration-300 text-handy-navy-700 placeholder-gray-400 bg-white/70"
                [class.border-red-400]="signupForm.get('password')?.invalid && signupForm.get('password')?.touched"
              />
              <button
                type="button"
                (click)="togglePasswordVisibility()"
                class="absolute right-10 top-1/2 transform -translate-y-1/2 text-handy-navy-400 hover:text-handy-navy-600 focus:outline-none"
                aria-label="Toggle password visibility"
              >
                <ion-icon
                  [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
                  class="text-xl"
                ></ion-icon>
              </button>
              <div
                *ngIf="signupForm.get('password')?.valid && signupForm.get('password')?.touched"
                class="absolute right-3 top-1/2 transform -translate-y-1/2"
              >
                <ion-icon
                  name="checkmark-circle"
                  class="text-green-500 text-lg"
                ></ion-icon>
              </div>
            </div>
            <div
              *ngIf="signupForm.get('password')?.invalid && signupForm.get('password')?.touched"
              class="text-red-500 text-xs mt-1 flex items-center"
            >
              <ion-icon name="warning-outline" class="mr-1"></ion-icon>
              <span *ngIf="signupForm.get('password')?.errors?.['required']"
                >Password is required</span
              >
              <span *ngIf="signupForm.get('password')?.errors?.['minlength']"
                >Password must be at least 6 characters</span
              >
            </div>
          </div>

          <!-- Confirm Password Input -->
          <div class="mb-6">
            <label
              for="confirmPassword"
              class="block text-sm font-semibold text-handy-navy-700 mb-2 flex items-center"
            >
              <ion-icon
                name="shield-checkmark-outline"
                class="mr-2 text-handy-blue-500"
              ></ion-icon>
              Confirm Password
            </label>
            <div class="relative">
              <input
                id="confirmPassword"
                [type]="showConfirmPassword ? 'text' : 'password'"
                formControlName="confirmPassword"
                placeholder="Confirm your password"
                class="p-3 border-2 border-gray-200 rounded-xl w-full shadow-sm focus:ring-3 focus:ring-handy-blue-200 focus:border-handy-blue-500 transition-all duration-300 text-handy-navy-700 placeholder-gray-400 bg-white/70"
                [class.border-red-400]="signupForm.get('confirmPassword')?.invalid && signupForm.get('confirmPassword')?.touched"
              />
              <button
                type="button"
                (click)="toggleConfirmPasswordVisibility()"
                class="absolute right-10 top-1/2 transform -translate-y-1/2 text-handy-navy-400 hover:text-handy-navy-600 focus:outline-none"
                aria-label="Toggle confirm password visibility"
              >
                <ion-icon
                  [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"
                  class="text-xl"
                ></ion-icon>
              </button>
              <div
                *ngIf="signupForm.get('confirmPassword')?.valid && signupForm.get('confirmPassword')?.touched"
                class="absolute right-3 top-1/2 transform -translate-y-1/2"
              >
                <ion-icon
                  name="checkmark-circle"
                  class="text-green-500 text-lg"
                ></ion-icon>
              </div>
            </div>
            <div
              *ngIf="signupForm.get('confirmPassword')?.invalid && signupForm.get('confirmPassword')?.touched"
              class="text-red-500 text-xs mt-1 flex items-center"
            >
              <ion-icon name="warning-outline" class="mr-1"></ion-icon>
              <span
                *ngIf="signupForm.get('confirmPassword')?.errors?.['required']"
                >Please confirm your password</span
              >
              <span
                *ngIf="signupForm.get('confirmPassword')?.errors?.['passwordMismatch']"
                >Passwords do not match</span
              >
            </div>
          </div>

          <!-- Signup Button -->
          <button
            type="submit"
            [disabled]="!signupForm.valid || isLoading"
            class="w-full bg-gradient-to-r from-handy-yellow-500 to-handy-blue-500 hover:from-handy-yellow-600 hover:to-handy-blue-600 disabled:from-gray-400 disabled:to-gray-500 text-white font-bold py-4 px-6 rounded-2xl shadow-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl disabled:scale-100 disabled:cursor-not-allowed flex items-center justify-center text-base"
          >
            <span *ngIf="!isLoading" class="flex items-center">
              <ion-icon
                name="person-add-outline"
                class="mr-2 text-xl"
              ></ion-icon>
              Create Account
            </span>
            <span *ngIf="isLoading" class="flex items-center justify-center">
              <svg
                class="animate-spin -ml-1 mr-3 h-5 w-5 text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
              Creating Account...
            </span>
          </button>

          <!-- Divider -->
          <div class="my-6 flex items-center">
            <div class="flex-1 border-t border-gray-300"></div>
            <span
              class="px-6 text-handy-navy-500 text-sm font-medium bg-white rounded-full"
              >or</span
            >
            <div class="flex-1 border-t border-gray-300"></div>
          </div>

          <!-- Login Link -->
          <div class="text-center">
            <p class="text-handy-navy-600 text-base font-medium">
              Already have an account?
              <button
                type="button"
                (click)="goToLogin()"
                class="text-handy-blue-600 hover:text-handy-blue-700 font-semibold ml-2 transition-colors duration-200 underline decoration-2 underline-offset-2 hover:decoration-handy-yellow-400 inline-flex items-center gap-1"
              >
                <ion-icon name="log-in-outline" class="text-sm"></ion-icon>
                Sign In
              </button>
            </p>
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="text-center mt-6">
        <p
          class="text-handy-navy-400 text-sm font-medium flex items-center justify-center gap-1"
        >
          © 2025 HandyHome. Made with
          <ion-icon name="heart" class="text-handy-blue-400"></ion-icon>
          for your home.
        </p>
      </div>
    </div>
  </div>

  <!-- Terms and Privacy Modal -->
  <app-terms-privacy-modal
    *ngIf="showTermsModal"
    (agree)="onTermsAgree()"
    (disagree)="onTermsDisagree()"
  >
  </app-terms-privacy-modal>
</ion-content>
